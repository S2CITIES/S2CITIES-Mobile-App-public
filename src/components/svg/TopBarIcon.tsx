import Dimensions from "constants/Dimensions";
import Colors from "../../constants/Colors";
import React, { FC, memo } from "react";
import { SvgXml } from "react-native-svg";
import { useAppTheme } from "utils/ui";

type TopBarIconSvgs = {
   settings: string;
   backArrow: string;
};

function svg(icon: keyof TopBarIconSvgs, color: string): string {
   const svg: TopBarIconSvgs = {
      settings: `
         <svg width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
         <path d="M15.0828 17.3251C16.3254 17.3251 17.3327 16.3182 17.3327 15.0762C17.3327 13.8341 16.3254 12.8273 15.0828 12.8273C13.8402 12.8273 12.8328 13.8341 12.8328 15.0762C12.8328 16.3182 13.8402 17.3251 15.0828 17.3251Z" fill="${color}"/>
         <path d="M29.9174 12.5574L28.7325 8.77917C28.6045 8.34251 28.3899 7.93608 28.1014 7.58412C27.8129 7.23216 27.4565 6.94189 27.0533 6.73061C26.6502 6.51933 26.2086 6.39137 25.7549 6.35437C25.3012 6.31737 24.8447 6.37208 24.4126 6.51525L23.9026 6.68017C23.5031 6.81218 23.0775 6.84567 22.6623 6.77779C22.247 6.70992 21.8543 6.54269 21.5177 6.29036L21.3527 6.17041C21.0242 5.91909 20.7593 5.59412 20.5796 5.22171C20.3998 4.8493 20.3101 4.43986 20.3177 4.02643V3.60663C20.325 2.66512 19.9581 1.7592 19.2977 1.08783C18.9836 0.770664 18.6099 0.518648 18.198 0.346262C17.7861 0.173876 17.3443 0.0845157 16.8978 0.083313H13.0729C12.1552 0.0951667 11.2793 0.468917 10.636 1.12319C9.99263 1.77747 9.63393 2.65928 9.63796 3.57665V3.93648C9.63652 4.37168 9.5374 4.80101 9.34789 5.19283C9.15838 5.58464 8.88333 5.92896 8.54299 6.2004L8.348 6.35033C7.97202 6.63462 7.53227 6.82284 7.06696 6.89861C6.60166 6.97439 6.12488 6.93543 5.67807 6.78512C5.2677 6.64318 4.83279 6.58593 4.39965 6.61686C3.96651 6.64778 3.54415 6.76623 3.15813 6.96503C2.75622 7.16442 2.39967 7.44435 2.11065 7.7874C1.82164 8.13045 1.60634 8.52929 1.47818 8.95908L0.248208 12.8572C-0.0370212 13.7361 0.0361264 14.692 0.451766 15.5173C0.867406 16.3426 1.59198 16.9706 2.46815 17.2651H2.70814C3.11232 17.4165 3.47508 17.6611 3.76698 17.9789C4.05887 18.2967 4.27167 18.6788 4.3881 19.0943L4.4781 19.3341C4.64531 19.7931 4.70122 20.2852 4.64125 20.77C4.58128 21.2547 4.40713 21.7184 4.13311 22.1228C3.57845 22.8778 3.34449 23.8212 3.48213 24.7478C3.61977 25.6743 4.11788 26.5091 4.86809 27.0705L7.97301 29.4243C8.56092 29.8516 9.27113 30.0777 9.99795 30.069C10.1925 30.0881 10.3884 30.0881 10.5829 30.069C11.0331 29.9819 11.4608 29.8041 11.8398 29.5463C12.2189 29.2885 12.5415 28.9563 12.7879 28.5697L13.1329 28.075C13.3749 27.728 13.6951 27.4427 14.0677 27.2422C14.4403 27.0417 14.8548 26.9315 15.2778 26.9205C15.7211 26.9096 16.16 27.0111 16.5534 27.2156C16.9469 27.4201 17.2821 27.7209 17.5278 28.09L17.7078 28.3448C17.9635 28.7253 18.2944 29.0494 18.6802 29.2971C19.066 29.5449 19.4984 29.7111 19.9509 29.7856C20.4033 29.86 20.8662 29.8411 21.3111 29.73C21.756 29.6189 22.1734 29.4179 22.5376 29.1395L25.5825 26.8606C26.3025 26.3017 26.7813 25.4887 26.9207 24.5882C27.0602 23.6878 26.8497 22.7682 26.3325 22.0179L25.9425 21.4481C25.708 21.0859 25.5545 20.6774 25.4923 20.2505C25.4302 19.8236 25.461 19.3883 25.5825 18.9743C25.7065 18.5312 25.9365 18.1249 26.2527 17.7905C26.5689 17.4562 26.9618 17.2038 27.3975 17.0552L27.6975 16.9503C28.5655 16.6492 29.2825 16.0226 29.6967 15.2028C30.111 14.383 30.1901 13.4344 29.9174 12.5574V12.5574ZM15.0828 20.3237C14.0445 20.3237 13.0295 20.0159 12.1662 19.4393C11.3028 18.8627 10.6299 18.0432 10.2326 17.0843C9.83523 16.1254 9.73127 15.0703 9.93383 14.0524C10.1364 13.0345 10.6364 12.0995 11.3706 11.3656C12.1048 10.6318 13.0403 10.132 14.0586 9.9295C15.077 9.72702 16.1326 9.83094 17.0919 10.2281C18.0511 10.6253 18.8711 11.2979 19.4479 12.1608C20.0248 13.0238 20.3327 14.0383 20.3327 15.0762C20.3327 16.4679 19.7796 17.8026 18.795 18.7867C17.8105 19.7708 16.4752 20.3237 15.0828 20.3237V20.3237Z" fill="${color}"/>
         </svg>
      `,
      backArrow: `
         <svg width="26" height="22" viewBox="0 0 26 22" fill="none" xmlns="http://www.w3.org/2000/svg">
         <path d="M23.9346 9.37696H5.23094L10.9556 2.56446C11.2233 2.24537 11.352 1.83399 11.3136 1.42083C11.2752 1.00766 11.0726 0.626548 10.7506 0.361332C10.4285 0.0961151 10.0133 -0.0314816 9.59629 0.00661172C9.17929 0.044705 8.79463 0.245368 8.52694 0.564457L0.641771 9.93946C0.58872 10.014 0.541281 10.0924 0.499837 10.1738C0.499837 10.252 0.499838 10.2988 0.389445 10.377C0.317964 10.5561 0.280537 10.7468 0.279053 10.9395C0.280537 11.1321 0.317964 11.3228 0.389445 11.502C0.389445 11.5801 0.389445 11.627 0.499837 11.7051C0.541281 11.7866 0.58872 11.8649 0.641771 11.9395L8.52694 21.3145C8.67522 21.4908 8.8609 21.6327 9.07078 21.7299C9.28066 21.8271 9.50958 21.8773 9.74126 21.877C10.1097 21.8777 10.4668 21.7505 10.7506 21.5176C10.9103 21.3864 11.0423 21.2253 11.139 21.0435C11.2358 20.8617 11.2954 20.6628 11.3144 20.4582C11.3335 20.2535 11.3116 20.0471 11.25 19.8509C11.1884 19.6546 11.0884 19.4723 10.9556 19.3145L5.23094 12.502H23.9346C24.3528 12.502 24.754 12.3373 25.0497 12.0443C25.3455 11.7513 25.5116 11.3539 25.5116 10.9395C25.5116 10.5251 25.3455 10.1276 25.0497 9.8346C24.754 9.54158 24.3528 9.37696 23.9346 9.37696Z" fill="${color}"/>
         </svg>
      `,
   };

   return svg[icon];
}

export enum TopBarPosition {
   left,
   right,
}

type TopBarIconProps = {
   icon: keyof TopBarIconSvgs;
   position: TopBarPosition;
   color?: string;
   style?: React.ComponentProps<typeof SvgXml>["style"];
};

const TopBarIcon: FC<TopBarIconProps> = memo(
   ({ icon, position, color, style }: TopBarIconProps) => {
      const colorScheme = useAppTheme();
      const _color = color ?? Colors[colorScheme].topBarIconColor;

      let width;
      let height;

      switch (position) {
         case TopBarPosition.left:
            width = Dimensions.topBarLeftIcon.size;
            height = Dimensions.topBarLeftIcon.size;
            break;
         case TopBarPosition.right:
            width = Dimensions.topBarRightIcon.size;
            height = Dimensions.topBarRightIcon.size;
            break;
      }

      return (
         <SvgXml
            xml={svg(icon, _color)}
            width={width}
            height={height}
            style={[
               position === TopBarPosition.right && {
                  marginRight: Dimensions.topBarRightIcon.marginRight,
               },
               position === TopBarPosition.left && {
                  marginLeft: Dimensions.topBarLeftIcon.marginLeft,
               },
               style,
            ]}
         />
      );
   }
);

export default TopBarIcon;
